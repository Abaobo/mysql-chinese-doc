
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>优化概述 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="statement-optimization.html" />
    
    
    <link rel="prev" href="optimization.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="installing.html">
            
                <a href="installing.html">
            
                    
                    安装和更新 MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="linux-installation.html">
            
                <a href="linux-installation.html">
            
                    
                    在 Linux 上安装 MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="linux-installation-apt-repo.html">
            
                <a href="linux-installation-apt-repo.html">
            
                    
                    在 Linux 上使用 APT 库安装 MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="linux-installation-docker.html">
            
                <a href="linux-installation-docker.html">
            
                    
                    在 Linux 上使用 Docker 部署 MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1" data-path="docker-mysql-getting-started.html">
            
                <a href="docker-mysql-getting-started.html">
            
                    
                    使用 Docker 部署 MySQL 服务器的基本步骤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.2" data-path="docker-mysql-more-topics.html">
            
                <a href="docker-mysql-more-topics.html">
            
                    
                    使用 Docker 部署 MySQL 服务器的更多主题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="tutorial.html">
            
                <a href="tutorial.html">
            
                    
                    教程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="examples.html">
            
                <a href="examples.html">
            
                    
                    常见查询示例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="optimization.html">
            
                <a href="optimization.html">
            
                    
                    优化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.1" data-path="optimize-overview.html">
            
                <a href="optimize-overview.html">
            
                    
                    优化概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="statement-optimization.html">
            
                <a href="statement-optimization.html">
            
                    
                    优化 SQL 语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="optimization-indexes.html">
            
                <a href="optimization-indexes.html">
            
                    
                    优化和索引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="optimizing-database-structure.html">
            
                <a href="optimizing-database-structure.html">
            
                    
                    优化数据库结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="optimizing-innodb.html">
            
                <a href="optimizing-innodb.html">
            
                    
                    优化 InnoDB 表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="optimizing-myisam.html">
            
                <a href="optimizing-myisam.html">
            
                    
                    优化 MyISAM 表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="optimizing-memory-tables.html">
            
                <a href="optimizing-memory-tables.html">
            
                    
                    优化 MEMORY 表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="execution-plan-information.html">
            
                <a href="execution-plan-information.html">
            
                    
                    理解查询执行计划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="controlling-optimizer.html">
            
                <a href="controlling-optimizer.html">
            
                    
                    控制查询优化器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="buffering-caching.html">
            
                <a href="buffering-caching.html">
            
                    
                    缓冲和缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="locking-issues.html">
            
                <a href="locking-issues.html">
            
                    
                    优化锁操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="optimizing-server.html">
            
                <a href="optimizing-server.html">
            
                    
                    优化 MySQL 服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.13" data-path="optimize-benchmarking.html">
            
                <a href="optimize-benchmarking.html">
            
                    
                    测量性能 (Benchmarking)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.14" data-path="thread-information.html">
            
                <a href="thread-information.html">
            
                    
                    检查线程信息
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >优化概述</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="81-&#x4F18;&#x5316;&#x6982;&#x8FF0;">8.1 &#x4F18;&#x5316;&#x6982;&#x8FF0;</h2>
<p>Database performance depends on several factors at the database level, such as tables, queries, and configuration settings. These software constructs result in CPU and I/O operations at the hardware level, which you must minimize and make as efficient as possible. As you work on database performance, you start by learning the high-level rules and guidelines for the software side, and measuring performance using wall-clock time. As you become an expert, you learn more about what happens internally, and start measuring things such as CPU cycles and I/O operations. </p>
<p>Typical users aim to get the best database performance out of their existing software and hardware configurations. Advanced users look for opportunities to improve the MySQL software itself, or develop their own storage engines and hardware appliances to expand the MySQL ecosystem. </p>
<ul>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/optimize-overview.html#optimize-database-level" target="_blank">Optimizing at the Database Level</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/optimize-overview.html#optimize-hardware-level" target="_blank">Optimizing at the Hardware Level</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/optimize-overview.html#optimize-portability-performance" target="_blank">Balancing Portability and Performance</a></li>
</ul>
<h3 id="optimizing-at-the-database-level">Optimizing at the Database Level</h3>
<p>The most important factor in making a database application fast is its basic design:</p>
<ul>
<li>Are the tables structured properly? In particular, do the columns have the right data types, and does each table have the appropriate columns for the type of work? For example, applications that perform frequent updates often have many tables with few columns, while applications that analyze large amounts of data often have few tables with many columns. </li>
<li>Are the right <a href="https://dev.mysql.com/doc/refman/8.0/en/optimization-indexes.html" target="_blank">indexes</a> in place to make queries efficient? </li>
<li><p>Are you using the appropriate storage engine for each table, and taking advantage of the strengths and features of each storage engine you use? In particular, the choice of a transactional storage engine such as <a href="https://dev.mysql.com/doc/refman/8.0/en/optimizing-innodb.html" target="_blank"><code>InnoDB</code></a> or a nontransactional one such as <a href="https://dev.mysql.com/doc/refman/8.0/en/optimizing-myisam.html" target="_blank"><code>MyISAM</code></a> can be very important for performance and scalability. </p>
<blockquote>
<p><strong>Note</strong></p>
<p>InnoDB is the default storage engine for new tables. In practice, the advanced <code>InnoDB</code> performance features mean that <code>InnoDB</code> tables often outperform the simpler <code>MyISAM</code> tables, especially for a busy database. </p>
</blockquote>
</li>
<li><p>Does each table use an appropriate row format? This choice also depends on the storage engine used for the table. In particular, compressed tables use less disk space and so require less disk I/O to read and write the data. Compression is available for all kinds of workloads with <code>InnoDB</code> tables, and for read-only <code>MyISAM</code> tables. </p>
</li>
<li>Does the application use an appropriate <a href="https://dev.mysql.com/doc/refman/8.0/en/locking-issues.html" target="_blank">locking strategy</a>? For example, by allowing shared access when possible so that database operations can run concurrently, and requesting exclusive access when appropriate so that critical operations get top priority. Again, the choice of storage engine is significant. The <code>InnoDB</code> storage engine handles most locking issues without involvement from you, allowing for better concurrency in the database and reducing the amount of experimentation and tuning for your code. </li>
<li>Are all<a href="https://dev.mysql.com/doc/refman/8.0/en/buffering-caching.html" target="_blank"> memory areas used for caching</a> sized correctly? That is, large enough to hold frequently accessed data, but not so large that they overload physical memory and cause paging. The main memory areas to configure are the <code>InnoDB</code> buffer pool and the MyISAM key cache. </li>
</ul>
<h3 id="optimizing-at-the-hardware-level">Optimizing at the Hardware Level</h3>
<p>Any database application eventually hits hardware limits as the database becomes more and more busy. A DBA must evaluate whether it is possible to tune the application or reconfigure the server to avoid these <a href="https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_bottleneck" target="_blank">bottlenecks</a>, or whether more hardware resources are required. System bottlenecks typically arise from these sources: </p>
<ul>
<li>Disk seeks. It takes time for the disk to find a piece of data. With modern disks, the mean time for this is usually lower than 10ms, so we can in theory do about 100 seeks a second. This time improves slowly with new disks and is very hard to optimize for a single table. The way to optimize seek time is to distribute the data onto more than one disk. </li>
<li>Disk reading and writing. When the disk is at the correct position, we need to read or write the data. With modern disks, one disk delivers at least 10&#x2013;20MB/s throughput. This is easier to optimize than seeks because you can read in parallel from multiple disks. </li>
<li>CPU cycles. When the data is in main memory, we must process it to get our result. Having large tables compared to the amount of memory is the most common limiting factor. But with small tables, speed is usually not the problem. </li>
<li>Memory bandwidth. When the CPU needs more data than can fit in the CPU cache, main memory bandwidth becomes a bottleneck. This is an uncommon bottleneck for most systems, but one to be aware of. </li>
</ul>
<h3 id="balancing-portability-and-performance">Balancing Portability and Performance</h3>
<p>To use performance-oriented SQL extensions in a portable MySQL program, you can wrap MySQL-specific keywords in a statement within <code>/*! */</code> comment delimiters. Other SQL servers ignore the commented keywords. For information about writing comments, see <a href="https://dev.mysql.com/doc/refman/8.0/en/comments.html" target="_blank">Section 9.6, &#x201C;Comment Syntax&#x201D;</a>. </p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="optimization.html" class="navigation navigation-prev " aria-label="Previous page: 优化">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="statement-optimization.html" class="navigation navigation-next " aria-label="Next page: 优化 SQL 语句">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"优化概述","level":"1.4.1","depth":2,"next":{"title":"优化 SQL 语句","level":"1.4.2","depth":2,"path":"statement-optimization.md","ref":"statement-optimization.md","articles":[]},"previous":{"title":"优化","level":"1.4","depth":1,"path":"optimization.md","ref":"optimization.md","articles":[{"title":"优化概述","level":"1.4.1","depth":2,"path":"optimize-overview.md","ref":"optimize-overview.md","articles":[]},{"title":"优化 SQL 语句","level":"1.4.2","depth":2,"path":"statement-optimization.md","ref":"statement-optimization.md","articles":[]},{"title":"优化和索引","level":"1.4.3","depth":2,"path":"optimization-indexes.md","ref":"optimization-indexes.md","articles":[]},{"title":"优化数据库结构","level":"1.4.4","depth":2,"path":"optimizing-database-structure.md","ref":"optimizing-database-structure.md","articles":[]},{"title":"优化 InnoDB 表","level":"1.4.5","depth":2,"path":"optimizing-innodb.md","ref":"optimizing-innodb.md","articles":[]},{"title":"优化 MyISAM 表","level":"1.4.6","depth":2,"path":"optimizing-myisam.md","ref":"optimizing-myisam.md","articles":[]},{"title":"优化 MEMORY 表","level":"1.4.7","depth":2,"path":"optimizing-memory-tables.md","ref":"optimizing-memory-tables.md","articles":[]},{"title":"理解查询执行计划","level":"1.4.8","depth":2,"path":"execution-plan-information.md","ref":"execution-plan-information.md","articles":[]},{"title":"控制查询优化器","level":"1.4.9","depth":2,"path":"controlling-optimizer.md","ref":"controlling-optimizer.md","articles":[]},{"title":"缓冲和缓存","level":"1.4.10","depth":2,"path":"buffering-caching.md","ref":"buffering-caching.md","articles":[]},{"title":"优化锁操作","level":"1.4.11","depth":2,"path":"locking-issues.md","ref":"locking-issues.md","articles":[]},{"title":"优化 MySQL 服务器","level":"1.4.12","depth":2,"path":"optimizing-server.md","ref":"optimizing-server.md","articles":[]},{"title":"测量性能 (Benchmarking)","level":"1.4.13","depth":2,"path":"optimize-benchmarking.md","ref":"optimize-benchmarking.md","articles":[]},{"title":"检查线程信息","level":"1.4.14","depth":2,"path":"thread-information.md","ref":"thread-information.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["highlight"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"optimize-overview.md","mtime":"2019-04-03T14:22:47.241Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-03T14:43:34.223Z"},"basePath":".","book":{"language":"zh-cn"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

