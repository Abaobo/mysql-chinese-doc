
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Date Calculationsa Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="working-with-null.html" />
    
    
    <link rel="prev" href="sorting-rows.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"mowangjuanzi","repo":"mysql-chinese-doc","type":"star","size":"small","count":true}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="preface.html">
            
                <a href="preface.html">
            
                    
                    Preface and Legal Notices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="installing.html">
            
                <a href="installing.html">
            
                    
                    Installing and Upgrading MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="linux-installation.html">
            
                <a href="linux-installation.html">
            
                    
                    Installing MySQL on Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="linux-installation-apt-repo.html">
            
                <a href="linux-installation-apt-repo.html">
            
                    
                    Installing MySQL on Linux Using the MySQL APT Repository
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="linux-installation-docker.html">
            
                <a href="linux-installation-docker.html">
            
                    
                    Deploying MySQL on Linux with Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.1" data-path="docker-mysql-getting-started.html">
            
                <a href="docker-mysql-getting-started.html">
            
                    
                    Basic Steps for MySQL Server Deployment with Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2" data-path="docker-mysql-more-topics.html">
            
                <a href="docker-mysql-more-topics.html">
            
                    
                    More Topics on Deploying MySQL Server with Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="tutorial.html">
            
                <a href="tutorial.html">
            
                    
                    Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="connecting-disconnecting.html">
            
                <a href="connecting-disconnecting.html">
            
                    
                    Connecting to and Disconnecting from the Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="entering-queries.html">
            
                <a href="entering-queries.html">
            
                    
                    Entering Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="database-use.html">
            
                <a href="database-use.html">
            
                    
                    Creating and Using a Database
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="creating-database.html">
            
                <a href="creating-database.html">
            
                    
                    Creating and Selecting a Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="creating-tables.html">
            
                <a href="creating-tables.html">
            
                    
                    Creating a Table
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="loading-tables.html">
            
                <a href="loading-tables.html">
            
                    
                    Loading Data into a Table
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4" data-path="retrieving-data.html">
            
                <a href="retrieving-data.html">
            
                    
                    Retrieving Information from a Table
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.4.1" data-path="selecting-all.html">
            
                <a href="selecting-all.html">
            
                    
                    Selecting All Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.2" data-path="selecting-rows.html">
            
                <a href="selecting-rows.html">
            
                    
                    Selecting Particular Rows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.3" data-path="selecting-columns.html">
            
                <a href="selecting-columns.html">
            
                    
                    Selecting Particular Columns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.4" data-path="sorting-rows.html">
            
                <a href="sorting-rows.html">
            
                    
                    Sorting Rows
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.3.4.5" data-path="date-calculations.html">
            
                <a href="date-calculations.html">
            
                    
                    Date Calculationsa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.6" data-path="working-with-null.html">
            
                <a href="working-with-null.html">
            
                    
                    Working with NULL Values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.7" data-path="pattern-matching.html">
            
                <a href="pattern-matching.html">
            
                    
                    Pattern Matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.8" data-path="counting-rows.html">
            
                <a href="counting-rows.html">
            
                    
                    Counting Rows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.9" data-path="multiple-tables.html">
            
                <a href="multiple-tables.html">
            
                    
                    Using More Than one Table
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="getting-information.html">
            
                <a href="getting-information.html">
            
                    
                    Getting Information About Databases and Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="examples.html">
            
                <a href="examples.html">
            
                    
                    Examples of Common Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="apache.html">
            
                <a href="apache.html">
            
                    
                    Using MySQL with Apache
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="programs.html">
            
                <a href="programs.html">
            
                    
                    MySQL Programs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="programs-client.html">
            
                <a href="programs-client.html">
            
                    
                    MySQL Client Programs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="mysql.html">
            
                <a href="mysql.html">
            
                    
                    mysql â The MySQL Command-Line Client
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="optimization.html">
            
                <a href="optimization.html">
            
                    
                    Optimization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="optimize-overview.html">
            
                <a href="optimize-overview.html">
            
                    
                    Optimization Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="statement-optimization.html">
            
                <a href="statement-optimization.html">
            
                    
                    Optimizing SQL Statements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="optimization-indexes.html">
            
                <a href="optimization-indexes.html">
            
                    
                    Optimization and Indexes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="optimizing-database-structure.html">
            
                <a href="optimizing-database-structure.html">
            
                    
                    Optimizing Database Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="optimizing-innodb.html">
            
                <a href="optimizing-innodb.html">
            
                    
                    Optimizing for InnoDB Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="optimizing-myisam.html">
            
                <a href="optimizing-myisam.html">
            
                    
                    Optimizing for MyISAM Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="optimizing-memory-tables.html">
            
                <a href="optimizing-memory-tables.html">
            
                    
                    Optimizing for MEMORY Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="execution-plan-information.html">
            
                <a href="execution-plan-information.html">
            
                    
                    Understanding the Query Execution Plan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="controlling-optimizer.html">
            
                <a href="controlling-optimizer.html">
            
                    
                    Controlling the Query Optimizer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="buffering-caching.html">
            
                <a href="buffering-caching.html">
            
                    
                    Buffering and Caching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="locking-issues.html">
            
                <a href="locking-issues.html">
            
                    
                    Optimizing Locking Operations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="optimizing-server.html">
            
                <a href="optimizing-server.html">
            
                    
                    Optimizing the MySQL Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="optimize-benchmarking.html">
            
                <a href="optimize-benchmarking.html">
            
                    
                    Measuring Performance (Benchmarking)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="thread-information.html">
            
                <a href="thread-information.html">
            
                    
                    Examining Thread Information
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Date Calculationsa</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h4 id="3345-date-calculations"><a name="3345-date-calculations" class="plugin-anchor" href="#3345-date-calculations"><i class="fa fa-link" aria-hidden="true"></i></a>3.3.4.5 Date Calculations</h4>
<p>MySQL provides several functions that you can use to perform calculations on dates, for example, to calculate ages or extract parts of dates.</p>
<p>To determine how many years old each of your pets is, use the <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_timestampdiff" target="_blank"><code>TIMESTAMPDIFF()</code></a> function. Its arguments are the unit in which you want the result expressed, and the two dates for which to take the difference. The following query shows, for each pet, the birth date, the current date, and the age in years. An <strong><em><code>alias</code></em></strong> (<code>age</code>) is used to make the final output column label more meaningful.</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth<span class="token punctuation">,</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span>birth<span class="token punctuation">,</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> age
       <span class="token keyword">FROM</span> pet<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
<span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">|</span> age  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
<span class="token operator">|</span> Fluffy   <span class="token operator">|</span> <span class="token number">1993</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">04</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> Claws    <span class="token operator">|</span> <span class="token number">1994</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span> Buffy    <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">|</span> Fang     <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">27</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span> Bowser   <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">31</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">13</span> <span class="token operator">|</span>
<span class="token operator">|</span> Chirpy   <span class="token operator">|</span> <span class="token number">1998</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> Whistler <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">09</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> Slim     <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">29</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span> Puffball <span class="token operator">|</span> <span class="token number">1999</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">30</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
</code></pre>
<p>The query works, but the result could be scanned more easily if the rows were presented in some order. This can be done by adding an <code>ORDER BY name</code> clause to sort the output by name:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth<span class="token punctuation">,</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span>birth<span class="token punctuation">,</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> age
       <span class="token keyword">FROM</span> pet <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> name<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
<span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">|</span> age  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
<span class="token operator">|</span> Bowser   <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">31</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">13</span> <span class="token operator">|</span>
<span class="token operator">|</span> Buffy    <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">|</span> Chirpy   <span class="token operator">|</span> <span class="token number">1998</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> Claws    <span class="token operator">|</span> <span class="token number">1994</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span> Fang     <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">27</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span> Fluffy   <span class="token operator">|</span> <span class="token number">1993</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">04</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> Puffball <span class="token operator">|</span> <span class="token number">1999</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">30</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> Slim     <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">29</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span> Whistler <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">09</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
</code></pre>
<p>To sort the output by <code>age</code> rather than <code>name</code>, just use a different <code>ORDER BY</code> clause:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth<span class="token punctuation">,</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span>birth<span class="token punctuation">,</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> age
       <span class="token keyword">FROM</span> pet <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> age<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
<span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">|</span> age  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
<span class="token operator">|</span> Chirpy   <span class="token operator">|</span> <span class="token number">1998</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> Puffball <span class="token operator">|</span> <span class="token number">1999</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">30</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> Whistler <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">09</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> Slim     <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">29</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span> Claws    <span class="token operator">|</span> <span class="token number">1994</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>    <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span> Fluffy   <span class="token operator">|</span> <span class="token number">1993</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">04</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> Fang     <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">27</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span> Bowser   <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">31</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">13</span> <span class="token operator">|</span>
<span class="token operator">|</span> Buffy    <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span> <span class="token number">2003</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+------------+------+</span>
</code></pre>
<p>A similar query can be used to determine age at death for animals that have died. You determine which animals these are by checking whether the <code>death</code> value is <code>NULL</code>. Then, for those with non-<code>NULL</code> values, compute the difference between the <code>death</code> and <code>birth</code> values:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth<span class="token punctuation">,</span> death<span class="token punctuation">,</span>
       TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span>birth<span class="token punctuation">,</span>death<span class="token punctuation">)</span> <span class="token keyword">AS</span> age
       <span class="token keyword">FROM</span> pet <span class="token keyword">WHERE</span> death <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> age<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+------------+------------+------+</span>
<span class="token operator">|</span> name   <span class="token operator">|</span> birth      <span class="token operator">|</span> death      <span class="token operator">|</span> age  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+------------+------+</span>
<span class="token operator">|</span> Bowser <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">31</span> <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">29</span> <span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+------------+------+</span>
</code></pre>
<p>The query uses <code>death IS NOT NULL</code> rather than <code>death &lt;&gt; NULL</code> because <code>NULL</code> is a special value that cannot be compared using the usual comparison operators. This is discussed later. See <a href="https://dev.mysql.com/doc/refman/8.0/en/working-with-null.html" target="_blank">Section 3.3.4.6, &#x201C;Working with NULL Values&#x201D;</a>.</p>
<p>What if you want to know which animals have birthdays next month? For this type of calculation, year and day are irrelevant; you simply want to extract the month part of the <code>birth</code> column. MySQL provides several functions for extracting parts of dates, such as <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_year" target="_blank"><code>YEAR()</code></a>, <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_month" target="_blank"><code>MONTH()</code></a>, and <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_dayofmonth" target="_blank"><code>DAYOFMONTH()</code></a>. <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_month" target="_blank"><code>MONTH()</code></a> is the appropriate function here. To see how it works, run a simple query that displays the value of both <code>birth</code> and <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_month" target="_blank"><code>MONTH(birth)</code></a>:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth<span class="token punctuation">,</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>birth<span class="token punctuation">)</span> <span class="token keyword">FROM</span> pet<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+------------+--------------+</span>
<span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>birth<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+--------------+</span>
<span class="token operator">|</span> Fluffy   <span class="token operator">|</span> <span class="token number">1993</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">04</span> <span class="token operator">|</span>            <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> Claws    <span class="token operator">|</span> <span class="token number">1994</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>            <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> Buffy    <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>            <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> Fang     <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">27</span> <span class="token operator">|</span>            <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">|</span> Bowser   <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">31</span> <span class="token operator">|</span>            <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">|</span> Chirpy   <span class="token operator">|</span> <span class="token number">1998</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">11</span> <span class="token operator">|</span>            <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span> Whistler <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">09</span> <span class="token operator">|</span>           <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span> Slim     <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">29</span> <span class="token operator">|</span>            <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> Puffball <span class="token operator">|</span> <span class="token number">1999</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">30</span> <span class="token operator">|</span>            <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+------------+--------------+</span>
</code></pre>
<p>Finding animals with birthdays in the upcoming month is also simple. Suppose that the current month is April. Then the month value is <code>4</code> and you can look for animals born in May (month <code>5</code>) like this:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth <span class="token keyword">FROM</span> pet <span class="token keyword">WHERE</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>birth<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+------------+</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+</span>
<span class="token operator">|</span> Buffy <span class="token operator">|</span> <span class="token number">1989</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+</span>
</code></pre>
<p>There is a small complication if the current month is December. You cannot merely add one to the month number (<code>12</code>) and look for animals born in month <code>13</code>, because there is no such month. Instead, you look for animals born in January (month <code>1</code>).</p>
<p>You can write the query so that it works no matter what the current month is, so that you do not have to use the number for a particular month. <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-add" target="_blank"><code>DATE_ADD()</code></a> enables you to add a time interval to a given date. If you add a month to the value of <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_curdate" target="_blank"><code>CURDATE()</code></a>, then extract the month part with <a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_month" target="_blank"><code>MONTH()</code></a>, the result produces the month in which to look for birthdays:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth <span class="token keyword">FROM</span> pet
       <span class="token keyword">WHERE</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>birth<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">MONTH</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>A different way to accomplish the same task is to add <code>1</code> to get the next month after the current one after using the modulo function (<code>MOD</code>) to wrap the month value to <code>0</code> if it is currently <code>12</code>:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> birth <span class="token keyword">FROM</span> pet
       <span class="token keyword">WHERE</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>birth<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token keyword">MONTH</span><span class="token punctuation">(</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_month" target="_blank"><code>MONTH()</code></a> returns a number between <code>1</code> and <code>12</code>. And <a href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_mod" target="_blank"><code>MOD(something,12)</code></a> returns a number between <code>0</code> and <code>11</code>. So the addition has to be after the <a href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_mod" target="_blank"><code>MOD()</code></a>, otherwise we would go from November (<code>11</code>) to January (<code>1</code>).</p>
<p>If a calculation uses invalid dates, the calculation fails and produces warnings:</p>
<pre class="language-"><code class="lang-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token string">&apos;2018-10-31&apos;</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token string">&apos;2018-10-31&apos;</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token number">2018</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span>                    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token string">&apos;2018-10-32&apos;</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token string">&apos;2018-10-32&apos;</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>                          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> <span class="token keyword">WARNINGS</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------+------+----------------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">Level</span>   <span class="token operator">|</span> Code <span class="token operator">|</span> Message                                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+------+----------------------------------------+</span>
<span class="token operator">|</span> Warning <span class="token operator">|</span> <span class="token number">1292</span> <span class="token operator">|</span> Incorrect <span class="token keyword">datetime</span> <span class="token keyword">value</span>: <span class="token string">&apos;2018-10-32&apos;</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+------+----------------------------------------+</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="sorting-rows.html" class="navigation navigation-prev " aria-label="Previous page: Sorting Rows">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="working-with-null.html" class="navigation navigation-next " aria-label="Next page: Working with NULL Values">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Date Calculationsa","level":"1.4.3.4.5","depth":4,"next":{"title":"Working with NULL Values","level":"1.4.3.4.6","depth":4,"path":"working-with-null.md","ref":"working-with-null.md","articles":[]},"previous":{"title":"Sorting Rows","level":"1.4.3.4.4","depth":4,"path":"sorting-rows.md","ref":"sorting-rows.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-highlight","-sharing","prism","github","github-buttons","expandable-chapters-small","donate","anchors","edit-link","copy-code-button"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/mowangjuanzi/mysql-chinese-doc"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"alipay":"/assets/alipay.png","alipayText":"æ¯ä»å®æèµ","button":"èµ","title":"","wechat":"/assets/wechat.jpg","wechatText":"å¾®ä¿¡æèµ"},"fontsettings":{"theme":"white","family":"sans","size":2},"github-buttons":{"buttons":[{"user":"mowangjuanzi","repo":"mysql-chinese-doc","type":"star","size":"small","count":true}]},"expandable-chapters-small":{},"copy-code-button":{},"edit-link":{"label":"Edit This Page","base":"https://github.com/mowangjuanzi/mysql-chinese-doc/edit/master"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"date-calculations.md","mtime":"2019-06-24T13:38:48.220Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-06-30T12:58:59.619Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

